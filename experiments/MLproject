name: UNOSAT_Challenge

conda_env: conda.yaml

entry_points:

  generate_3b_images:
    parameters:
      input_path: str
      output_path: str
    command: "source env.sh && python ../code/scripts/jobs/generate_3b_images.py {input_path} {output_path}"

  rasterize:
    parameters:
      input_path: str
      output_path: str
    command: "source env.sh && python ../code/scripts/jobs/generate_masks.py {input_path} {output_path}"

  generate_tiles:
    parameters:
      input_path: str
      output_path: str
    command: "source env.sh && python ../code/scripts/jobs/generate_tiles.py const_size {input_path} {output_path} 512 512 32 --extensions='tif'"

  generate_tiles_stats:
    parameters:
      input_path: str
      output_path: str
    command: "source env.sh && python ../code/scripts/jobs/generate_tiles_stats.py {input_path} {output_path}"

  generate_test_tiles:
    parameters:
      input_path: str
      output_path: str
    command: "source env.sh && python ../code/scripts/jobs/generate_tiles.py const_stride {input_path} {output_path} 512 512 512 512 --extensions='tif'"

  main:
    parameters:
      script_path: path
      config_path: path
    command: "source env.sh && sh setup_apex.sh && python -m py_config_runner.__main__ {script_path} {config_path}"
